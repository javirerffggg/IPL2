<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Configuraci√≥n PWA para iOS (iPhone) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="IPL Warrior">
    <meta name="theme-color" content="#0b120d">

    <title>IPL Weekend Warrior</title>
    
    <!-- Icono Generado Autom√°ticamente (Escudo Verde T√°ctico) -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzBiMTIwZDsiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwYjEyMGQiLz48cGF0aCBkPSJNMjU2IDQ4QzE1MCA0OCA2NCAxMDQgNjQgMTA0djE0NGMwIDEzNiAxOTIgMjE2IDE5MiAyMTZzMTkyLTgwIDE5Mi0yMTZWMTA0cz04Ni01Ni0xOTItNTZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiMzMGU4N2EiIHN0cm9rZS13aWR0aD0iMjQiLz48cGF0aCBkPSJNMjU2IDExMnYyODgiIHN0cm9rZT0iIzMwZTg3YSIgc3Ryb2tlLXdpZHRoPSIyNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTE2MCAyNTZoMTkyIiBzdHJva2U9IiMzMGU4N2EiIHN0cm9rZS13aWR0aD0iMjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg==">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzBiMTIwZDsiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwYjEyMGQiLz48cGF0aCBkPSJNMjU2IDQ4QzE1MCA0OCA2NCAxMDQgNjQgMTA0djE0NGMwIDEzNiAxOTIgMjE2IDE5MiAyMTZzMTkyLTgwIDE5Mi0yMTZWMTA0cz04Ni01Ni0xOTItNTZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiMzMGU4N2EiIHN0cm9rZS13aWR0aD0iMjQiLz48cGF0aCBkPSJNMjU2IDExMnYyODgiIHN0cm9rZT0iIzMwZTg3YSIgc3Ryb2tlLXdpZHRoPSIyNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTE2MCAyNTZoMTkyIiBzdHJva2U9IiMzMGU4N2EiIHN0cm9rZS13aWR0aD0iMjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg==">
    
    <!-- Librer√≠as Externas (React, Tailwind, Iconos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#30e87a',
              background: '#0b120d',
              surface: '#16261d',
            },
            fontFamily: {
              mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
              sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            }
          }
        }
      }
    </script>
    
    <style>
        /* Estilos Base para App Nativa */
        body { 
            background-color: #0b120d; 
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
            /* Evita el rebote el√°stico en iOS */
            position: fixed; 
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        /* Ocultar scrollbar pero permitir scroll */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Efecto Espejo para la c√°mara */
        video {
            transform: scaleX(-1);
        }
        
        /* Animaciones de entrada */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body>
    <div id="root" class="h-full w-full overflow-hidden"></div>

    <!-- React Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- L√≥gica de la Aplicaci√≥n -->
    <script type="text/babel" data-presets="react">
        const { useState, useEffect, useRef } = React;
        const { createRoot } = ReactDOM;
        // Importamos iconos de la librer√≠a global
        const { 
            Shield, Zap, Calendar, Activity, Settings, Camera, History, 
            Menu, CheckCircle2, AlertTriangle, Play, ChevronRight, 
            Maximize2, Battery, User, MapPin, Info 
        } = lucide.icons;

        const TacticalIPLApp = () => {
          // --- ESTADO ---
          const [view, setView] = useState('loading'); 
          const [startDate, setStartDate] = useState(null);
          const [logs, setLogs] = useState([]);
          const [currentSession, setCurrentSession] = useState(null);
          const [cameraActive, setCameraActive] = useState(false);
          const videoRef = useRef(null);

          // --- INICIALIZACI√ìN ---
          useEffect(() => {
            const savedStart = localStorage.getItem('ipl_start_date');
            const savedLogs = JSON.parse(localStorage.getItem('ipl_logs') || '[]');
            
            // Peque√±o delay para simular carga de sistema
            setTimeout(() => {
                if (savedStart) {
                    setStartDate(new Date(savedStart));
                    setView('dashboard');
                } else {
                    setView('onboarding');
                }
                setLogs(savedLogs);
            }, 800);
          }, []);

          // --- MOTOR L√ìGICO ---
          const getMissionStatus = () => {
            if (!startDate) return { status: 'SETUP', message: 'Configura inicio' };
            
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0 = Domingo, 6 = S√°bado
            
            // Calculamos semanas transcurridas desde el inicio
            const diffTime = Math.abs(today - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
            const currentWeek = Math.floor(diffDays / 7) + 1;
            
            // Regla de Hombros: Cada 4 semanas
            const isShoulderWeek = currentWeek % 4 === 0;

            let mission = {
              status: 'REST', 
              title: 'FASE DE DESCANSO', 
              subtitle: 'Recuperaci√≥n de piel',
              action: null, 
              isSpecial: false, 
              uvIndex: 2, 
              week: currentWeek
            };

            if (dayOfWeek === 6) { // S√°bado
              mission = { 
                  ...mission, 
                  status: 'ACTIVE', 
                  title: 'TREN INFERIOR', 
                  subtitle: 'Piernas completas + Gl√∫teos', 
                  action: 'legs', 
                  uvIndex: 4 
              };
            } else if (dayOfWeek === 0) { // Domingo
              if (isShoulderWeek) {
                mission = { 
                    ...mission, 
                    status: 'ACTIVE', 
                    title: 'TORSO + HOMBROS', 
                    subtitle: 'Incluye degradado (Sem. 4)', 
                    action: 'torso_special', 
                    isSpecial: true, 
                    uvIndex: 5 
                };
              } else {
                mission = { 
                    ...mission, 
                    status: 'ACTIVE', 
                    title: 'TORSO SUPERIOR', 
                    subtitle: 'Pecho + Abdomen', 
                    action: 'torso', 
                    isSpecial: false, 
                    uvIndex: 5 
                };
              }
            }
            return mission;
          };

          const mission = getMissionStatus();

          // --- MANEJADORES ---
          const handleStartSetup = (date) => {
            setStartDate(date);
            localStorage.setItem('ipl_start_date', date.toISOString());
            setView('dashboard');
          };

          const handleStartSession = (type) => {
            setCurrentSession({ type, step: 0 });
            setView('session');
          };

          const handleCompleteSession = () => {
            const newLog = { 
                id: Date.now(), 
                date: new Date().toISOString(), 
                type: currentSession.type, 
                week: mission.week 
            };
            const updatedLogs = [newLog, ...logs];
            setLogs(updatedLogs);
            localStorage.setItem('ipl_logs', JSON.stringify(updatedLogs));
            setView('dashboard');
            setCurrentSession(null);
          };

          const startCamera = async () => {
            try {
              setCameraActive(true);
              const stream = await navigator.mediaDevices.getUserMedia({ 
                  video: { facingMode: 'user' } 
              });
              if (videoRef.current) videoRef.current.srcObject = stream;
            } catch (err) { 
                alert("C√°mara no disponible. Aseg√∫rate de usar Safari/Chrome y dar permisos."); 
                setCameraActive(false); 
            }
          };
          
          const stopCamera = () => {
             if (videoRef.current?.srcObject) {
                 videoRef.current.srcObject.getTracks().forEach(t => t.stop());
             }
             setCameraActive(false);
          };

          const resetData = () => {
              if(confirm("¬øBorrar todos los datos y empezar de cero?")) {
                  localStorage.clear();
                  window.location.reload();
              }
          }

          // --- COMPONENTES VISUALES ---
          const Scanline = () => <div className="pointer-events-none fixed inset-0 z-50 opacity-[0.03]" style={{ background: 'linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2))', backgroundSize: '100% 4px' }} />;
          const GridBg = () => <div className="absolute inset-0 opacity-10 pointer-events-none" style={{ backgroundImage: `linear-gradient(to right, #30e87a 1px, transparent 1px), linear-gradient(to bottom, #30e87a 1px, transparent 1px)`, backgroundSize: '40px 40px' }} />;

          // --- VISTAS ---
          
          const LoadingView = () => (
             <div className="flex items-center justify-center h-full bg-[#0b120d]">
                 <Activity className="text-[#30e87a] animate-bounce" size={48} />
             </div>
          );

          const Onboarding = () => (
            <div className="flex flex-col items-center justify-center h-full p-6 text-center space-y-8 animate-fade-in relative z-20">
              <div className="relative">
                  <div className="absolute inset-0 bg-[#30e87a] blur-2xl opacity-20"></div>
                  <Shield size={80} color="#30e87a" className="relative z-10" />
              </div>
              <div>
                  <h1 className="text-3xl font-bold text-white uppercase tracking-wider">Weekend Warrior</h1>
                  <p className="text-white/60 text-sm mt-2 font-mono">Protocolo T√°ctico IPL</p>
              </div>
              <div className="w-full max-w-xs bg-[#16261d] p-4 rounded-xl border border-white/10">
                  <label className="text-[#30e87a] text-xs font-bold uppercase mb-2 block text-left">Fecha de Inicio (Primer S√°bado)</label>
                  <input 
                    type="date" 
                    className="bg-black/50 text-white p-4 rounded-lg w-full border border-white/20 outline-none focus:border-[#30e87a]" 
                    onChange={(e) => handleStartSetup(new Date(e.target.value))} 
                  />
              </div>
            </div>
          );

          const Dashboard = () => (
            <div className="flex flex-col gap-6 p-5 pb-24 animate-fade-in h-full overflow-y-auto">
              <div className="flex justify-between items-center pt-8"> {/* pt-8 para la status bar del iPhone */}
                 <div>
                     <h2 className="text-[10px] font-bold text-[#30e87a] uppercase tracking-widest mb-1">Estado Operativo</h2>
                     <h1 className="text-2xl font-bold text-white">HOLA, GUERRERO</h1>
                 </div>
                 <div className="bg-black/40 px-3 py-1.5 rounded-full border border-white/10 text-white text-[10px] flex items-center gap-2">
                     <div className={`w-2 h-2 rounded-full ${mission.uvIndex < 3 ? 'bg-green-500 shadow-[0_0_5px_lime]' : 'bg-yellow-500'}`}></div>
                     UV: {mission.uvIndex}
                 </div>
              </div>

              {/* Tarjeta Principal */}
              <div className="bg-[#16261d] border border-white/10 rounded-3xl p-6 text-center space-y-4 relative overflow-hidden shadow-2xl">
                <div className="absolute top-0 right-0 p-4 opacity-5"><Activity size={150} color="white"/></div>
                <div className="relative z-10 flex flex-col items-center">
                   <div className={`inline-block px-3 py-1 rounded-full text-[10px] font-bold mb-4 border ${mission.status === 'ACTIVE' ? 'bg-[#30e87a]/20 text-[#30e87a] border-[#30e87a]/50' : 'bg-white/5 text-white/50 border-white/10'}`}>
                       {mission.status === 'ACTIVE' ? '‚óè MISI√ìN ACTIVA' : 'STANDBY'}
                   </div>
                   
                   <h3 className="text-3xl font-black text-white uppercase leading-none mb-1">{mission.title}</h3>
                   <p className="text-[#30e87a] text-xs uppercase font-mono tracking-wide">{mission.subtitle}</p>
                   
                   {mission.status === 'ACTIVE' ? 
                     <button onClick={() => handleStartSession(mission.action)} className="mt-8 w-full bg-[#30e87a] hover:bg-[#25b560] active:scale-95 transition-all text-[#0b120d] h-14 rounded-2xl font-black flex items-center justify-center gap-2 uppercase text-lg shadow-[0_0_20px_rgba(48,232,122,0.3)]">
                        <Play size={24} fill="black"/> Iniciar
                     </button> :
                     <div className="mt-8 w-full bg-black/30 text-white/40 h-14 rounded-2xl flex items-center justify-center gap-2 text-sm border border-white/5">
                        <Calendar size={16}/> PR√ìXIMA: S√ÅBADO
                     </div>
                   }
                </div>
                {mission.isSpecial && (
                    <div className="text-yellow-400 text-[10px] mt-4 bg-yellow-400/10 p-3 rounded-xl border border-yellow-400/20 flex items-center gap-2 text-left">
                        <AlertTriangle size={16} />
                        <span><strong>ALERTA:</strong> Semana de Degradado. Prepara tu recortadora al 1mm.</span>
                    </div>
                )}
              </div>

              {/* Barra de Progreso */}
              <div className="bg-[#16261d] p-5 rounded-2xl border border-white/10 space-y-3">
                 <div className="flex justify-between text-[10px] text-white/60 uppercase font-bold tracking-wider">
                     <span className="flex items-center gap-2"><MapPin size={12} className="text-[#30e87a]"/> Fase de Ataque</span>
                     <span className="text-[#30e87a] bg-[#30e87a]/10 px-2 py-0.5 rounded">SEM {mission.week} / 12</span>
                 </div>
                 <div className="flex gap-1 h-2">
                     {[...Array(12)].map((_,i) => (
                         <div key={i} className={`flex-1 rounded-sm transition-all ${i+1 <= mission.week ? 'bg-[#30e87a] shadow-[0_0_5px_#30e87a]' : 'bg-white/10'}`}></div>
                     ))}
                 </div>
                 <p className="text-right text-[9px] text-white/30 font-mono">CONSTANCIA = RESULTADOS</p>
              </div>
            </div>
          );

          const Wizard = () => {
             const stepsDict = {
                legs: [
                    {t:'Gemelos', d:'Modo Deslizamiento. Potencia M√°xima.', icon: <Zap size={48}/>}, 
                    {t:'Muslos', d:'Cubre todo el √°rea. Paciencia.', icon: <Zap size={48}/>}, 
                    {t:'Espinillas', d:'‚ö†Ô∏è ZONA HUESO. Baja potencia o usa modo pluma.', icon: <AlertTriangle size={48} className="text-yellow-500"/>},
                    {t:'Gl√∫teos', d:'Usa un espejo de mano. Evita zonas sensibles.', icon: <Zap size={48}/>}
                ],
                torso: [
                    {t:'Pecho', d:'Filas ordenadas de arriba a abajo.', icon: <Zap size={48}/>}, 
                    {t:'Abdomen', d:'L√≠nea alba y laterales.', icon: <Zap size={48}/>}
                ],
                torso_special: [
                    {t:'RECORTAR HOMBROS', d:'¬°ALTO! Antes de disparar, usa la herramienta ESPEJO en la pesta√±a INTEL para hacer el degradado.', icon: <Camera size={48} className="text-yellow-500"/>}, 
                    {t:'Pecho y Abdomen', d:'Rutina normal de torso.', icon: <Zap size={48}/>}, 
                    {t:'Hombros (Bola)', d:'Dispara SOLO en la parte superior redonda.', icon: <Zap size={48}/>}, 
                    {t:'STOP Axila', d:'No bajes del hombro. Zona prohibida.', icon: <AlertTriangle size={48} className="text-red-500"/>}
                ]
             };
             const steps = stepsDict[currentSession.type];
             const s = steps[currentSession.step];
             
             return (
               <div className="h-full flex flex-col p-6 animate-fade-in bg-[#0b120d]">
                 <div className="flex justify-between mb-8 pt-4">
                     <button onClick={()=>setView('dashboard')} className="text-white/50 text-sm">Cancelar</button>
                     <span className="text-[#30e87a] text-xs font-mono bg-[#30e87a]/10 px-2 py-1 rounded">SESI√ìN EN CURSO</span>
                 </div>
                 
                 <div className="w-full bg-white/10 h-1.5 rounded-full mb-12 overflow-hidden">
                     <div className="bg-[#30e87a] h-full transition-all duration-500" style={{width: `${((currentSession.step+1)/steps.length)*100}%`}}></div>
                 </div>
                 
                 <div className="flex-1 flex flex-col items-center justify-center text-center space-y-8">
                    <div className="p-8 rounded-full bg-[#16261d] border border-white/10 shadow-[0_0_30px_rgba(48,232,122,0.1)] relative">
                        <div className="text-[#30e87a] relative z-10">{s.icon}</div>
                        <div className="absolute inset-0 border border-[#30e87a] rounded-full animate-ping opacity-20"></div>
                    </div>
                    <div>
                        <h2 className="text-4xl font-black text-white uppercase mb-4 leading-none">{s.t}</h2>
                        <p className="text-white/60 text-lg leading-relaxed max-w-xs mx-auto">{s.d}</p>
                    </div>
                 </div>
                 
                 <button 
                    onClick={() => currentSession.step < steps.length-1 ? setCurrentSession({...currentSession, step: currentSession.step+1}) : handleCompleteSession()} 
                    className="w-full h-16 bg-[#30e87a] active:bg-[#25b560] text-[#0b120d] font-bold rounded-2xl uppercase flex items-center justify-center gap-3 text-lg mb-8 shadow-[0_0_20px_rgba(48,232,122,0.3)]"
                 >
                    {currentSession.step < steps.length-1 ? 'Siguiente Zona' : 'Terminar Sesi√≥n'} <ChevronRight />
                 </button>
               </div>
             )
          };
          
          const Tools = () => (
             <div className="p-5 pt-12 space-y-6 animate-fade-in h-full overflow-y-auto pb-24">
                <h2 className="text-white text-xl font-bold border-b border-white/10 pb-4 tracking-widest uppercase">INTEL / Herramientas</h2>
                
                {/* Espejo T√°ctico */}
                <div className="bg-[#16261d] border border-white/10 rounded-2xl overflow-hidden shadow-xl">
                   <div className="p-4 border-b border-white/5 bg-white/5"><h3 className="text-white font-bold flex gap-2 items-center"><Camera className="text-[#30e87a]" size={20}/> Espejo T√°ctico (Degradado)</h3></div>
                   {!cameraActive ? 
                     <div className="h-64 bg-black/50 flex flex-col gap-4 items-center justify-center p-6 text-center">
                         <p className="text-white/40 text-sm">Usa esto para ver las gu√≠as de corte sobre tu hombro en tiempo real.</p>
                         <button onClick={startCamera} className="bg-[#30e87a] text-black font-bold px-6 py-3 rounded-xl flex gap-2 items-center hover:scale-105 transition-transform"><Maximize2 size={18}/> ACTIVAR C√ÅMARA</button>
                     </div> :
                     <div className="relative h-[450px] bg-black">
                        <video ref={videoRef} autoPlay playsInline className="w-full h-full object-cover"></video>
                        
                        {/* Overlay AR */}
                        <div className="absolute inset-0 pointer-events-none flex flex-col justify-center">
                            <div className="w-full border-t-2 border-dashed border-[#30e87a] opacity-80 relative mb-16">
                                <span className="absolute -top-6 right-2 text-[#30e87a] text-[10px] font-bold bg-black/60 px-2 py-1 rounded backdrop-blur">ZONA 1: CORTE 1-2mm</span>
                            </div>
                            <div className="w-full border-t-2 border-dotted border-yellow-400 opacity-60 relative mb-16">
                                <span className="absolute -top-6 right-2 text-yellow-400 text-[10px] font-bold bg-black/60 px-2 py-1 rounded backdrop-blur">ZONA 2: TRANSICI√ìN</span>
                            </div>
                            <div className="w-full border-t-4 border-red-500 shadow-[0_0_15px_red] relative opacity-90">
                                <span className="absolute -top-6 right-2 text-red-500 text-[10px] font-bold bg-black/60 px-2 py-1 rounded backdrop-blur">üõë ZONA 3: AXILA (STOP)</span>
                            </div>
                        </div>

                        <button onClick={stopCamera} className="absolute bottom-6 left-1/2 -translate-x-1/2 bg-red-500/90 text-white font-bold px-6 py-2 rounded-full text-sm shadow-lg backdrop-blur">APAGAR</button>
                     </div>
                   }
                </div>
                
                <div className="bg-[#16261d] border border-white/10 rounded-2xl p-6 opacity-50 flex items-center justify-between">
                    <div>
                        <h3 className="text-white font-bold flex items-center gap-2"><History className="text-[#30e87a]" size={18}/> Ghost Cam</h3>
                        <p className="text-xs text-white/50 mt-1">Comparador de progreso (Pr√≥ximamente)</p>
                    </div>
                    <Info size={20} className="text-white/20"/>
                </div>

                <div className="pt-8 text-center">
                    <button onClick={resetData} className="text-red-500/50 text-xs hover:text-red-500 transition-colors">Resetear todos los datos de la App</button>
                </div>
             </div>
          );

          const Logs = () => (
             <div className="p-5 pt-12 space-y-6 animate-fade-in h-full overflow-y-auto pb-24">
                <div className="flex justify-between items-end border-b border-white/10 pb-4">
                    <h2 className="text-white text-xl font-bold tracking-widest uppercase">Bit√°cora</h2>
                    <span className="text-[#30e87a] text-xs font-mono">{logs.length} REGISTROS</span>
                </div>
                
                {logs.length === 0 ? 
                    <div className="text-white/30 text-center py-20 italic bg-[#16261d]/50 rounded-2xl border border-white/5">
                        <History size={48} className="mx-auto mb-4 opacity-20"/>
                        Sin misiones completadas.
                    </div> : 
                    <div className="space-y-3">
                        {logs.map(l => (
                            <div key={l.id} className="bg-[#16261d] p-4 rounded-xl border-l-4 border-[#30e87a] flex justify-between items-center shadow-lg">
                                <div>
                                    <p className="text-white font-bold uppercase text-sm tracking-wide">
                                        {l.type === 'torso_special' ? 'Torso + Hombros' : 
                                         l.type === 'legs' ? 'Tren Inferior' : 'Torso Superior'}
                                    </p>
                                    <p className="text-white/40 text-[10px] font-mono mt-1">
                                        {new Date(l.date).toLocaleDateString()} ‚Ä¢ {new Date(l.date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                                    </p>
                                </div>
                                <span className="text-[#30e87a] text-[10px] font-bold bg-[#30e87a]/10 px-2 py-1 rounded border border-[#30e87a]/20">SEM {l.week}</span>
                            </div>
                        ))}
                    </div>
                }
             </div>
          );

          // --- UI PRINCIPAL ---
          return (
            <div className="h-full w-full bg-[#0b120d] text-white flex flex-col relative font-sans">
              <Scanline /><GridBg />
              
              <main className="flex-1 overflow-hidden relative z-10">
                {view === 'loading' ? <LoadingView /> :
                 view === 'onboarding' ? <Onboarding /> : 
                 view === 'session' ? <Wizard /> :
                 view === 'tools' ? <Tools /> :
                 view === 'logs' ? <Logs /> : <Dashboard />
                }
              </main>
              
              {/* Navegaci√≥n Inferior (Dock) */}
              {view !== 'onboarding' && view !== 'session' && view !== 'loading' && (
                <nav className="h-20 bg-[#0b120d]/80 backdrop-blur-md border-t border-white/10 flex justify-around items-center px-4 z-50 fixed bottom-0 w-full pb-4">
                   <button onClick={()=>setView('dashboard')} className={`flex flex-col items-center p-2 w-16 transition-all ${view==='dashboard'?'text-[#30e87a] -translate-y-2':'text-white/40'}`}>
                       <div className={`p-2 rounded-xl transition-all ${view==='dashboard'?'bg-[#30e87a]/20 shadow-[0_0_15px_rgba(48,232,122,0.3)]':''}`}><Activity size={24}/></div>
                       <span className="text-[9px] font-bold mt-1 tracking-widest">HQ</span>
                   </button>
                   <button onClick={()=>setView('tools')} className={`flex flex-col items-center p-2 w-16 transition-all ${view==='tools'?'text-[#30e87a] -translate-y-2':'text-white/40'}`}>
                       <div className={`p-2 rounded-xl transition-all ${view==='tools'?'bg-[#30e87a]/20 shadow-[0_0_15px_rgba(48,232,122,0.3)]':''}`}><Menu size={24}/></div>
                       <span className="text-[9px] font-bold mt-1 tracking-widest">INTEL</span>
                   </button>
                   <button onClick={()=>setView('logs')} className={`flex flex-col items-center p-2 w-16 transition-all ${view==='logs'?'text-[#30e87a] -translate-y-2':'text-white/40'}`}>
                       <div className={`p-2 rounded-xl transition-all ${view==='logs'?'bg-[#30e87a]/20 shadow-[0_0_15px_rgba(48,232,122,0.3)]':''}`}><History size={24}/></div>
                       <span className="text-[9px] font-bold mt-1 tracking-widest">LOGS</span>
                   </button>
                </nav>
              )}
            </div>
          );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<TacticalIPLApp />);
    </script>
    
    <script>lucide.createIcons();</script>
</body>
</html>
